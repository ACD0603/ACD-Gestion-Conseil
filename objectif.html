<!DOCTYPE html>
<html lang="fr" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ACD Gestion & Conseil | Pilotage Budgétaire & Pédagogie Financière</title>
    <meta name="description" content="Expertise en stratégie financière et accompagnement budgétaire à Lille. Optimisez votre patrimoine avec une approche pédagogique et indépendante.">
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Crect width='100' height='100' rx='25' fill='%230F172A'/%3E%3Ctext x='50%25' y='55%25' dominant-baseline='middle' text-anchor='middle' font-family='Arial, sans-serif' font-weight='900' font-size='45' fill='white'%3EACD%3C/text%3E%3C/svg%3E">
    
    <!-- Scripts & Styles -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&family=Playfair+Display:italic,wght@600;700&display=swap');
        
        :root {
            --brand-dark: #0F172A;
            --brand-blue: #1E40AF;
            --brand-accent: #3B82F6;
        }

        body { 
            font-family: 'Plus Jakarta Sans', sans-serif; 
            background-color: #ffffff;
            color: #1e293b;
            overflow-x: hidden;
        }

        .font-serif { font-family: 'Playfair Display', serif; }
        
        .glass-card {
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(12px);
            border-radius: 1.5rem;
            border: 1px solid rgba(241, 245, 249, 1);
            transition: all 0.4s cubic-bezier(0.23, 1, 0.32, 1);
        }

        .hover-lift:hover {
            transform: translateY(-10px);
            box-shadow: 0 40px 80px -15px rgba(15, 23, 42, 0.08);
            border-color: rgba(59, 130, 246, 0.2);
        }

        .gradient-text {
            background: linear-gradient(135deg, #0F172A 0%, #1E40AF 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        /* Nav underline effect */
        .nav-link { position: relative; }
        .nav-link::after {
            content: '';
            position: absolute;
            width: 0;
            height: 2px;
            bottom: -4px;
            left: 0;
            background-color: var(--brand-blue);
            transition: width 0.3s ease;
        }
        .nav-link:hover::after { width: 100%; }
        
        /* Highlight for active page */
        .nav-active { color: var(--brand-blue) !important; }
        .nav-active::after { width: 100% !important; }

        /* Page Management */
        .hidden-page { display: none !important; }
        
        .step-container { display: none; }
        .step-container.active { 
            display: block; 
            animation: fadeIn 0.5s ease forwards;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Menu Mobile */
        #mobile-menu {
            transition: all 0.4s cubic-bezier(0.16, 1, 0.3, 1);
            transform: translateY(-100%);
            opacity: 0;
            position: fixed;
            inset: 0;
            background: white;
            z-index: 90;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        #mobile-menu.active {
            transform: translateY(0);
            opacity: 1;
        }

        .progress-bar { transition: width 0.4s cubic-bezier(0.4, 0, 0.2, 1); }
    </style>
</head>
<body class="selection:bg-blue-100 selection:text-blue-900">

    <!-- Navigation -->
    <nav id="navbar" class="fixed w-full z-[100] transition-all duration-500 py-6">
        <div class="container mx-auto px-6 flex justify-between items-center">
            <a href="#" onclick="showPage('home')" class="flex items-center space-x-3 group">
                <div id="logo-square" class="w-12 h-12 bg-slate-900 rounded-xl flex items-center justify-center text-white font-extrabold shadow-xl transition-all duration-500 group-hover:rotate-[10deg] group-hover:bg-blue-700 group-hover:scale-110">
                    ACD
                </div>
                <div class="flex flex-col">
                    <span class="text-sm font-extrabold uppercase tracking-widest text-slate-900">Gestion & Conseil</span>
                    <span class="text-[10px] font-semibold text-blue-600 uppercase tracking-tighter flex items-center">
                        <i data-lucide="map-pin" class="w-3 h-3 mr-1"></i> Lille & France
                    </span>
                </div>
            </a>

            <div class="hidden md:flex items-center space-x-10">
                <a href="#" id="link-qui" class="nav-link text-[13px] font-bold text-slate-600 hover:text-slate-900 transition-colors uppercase tracking-wider">Qui suis-je ?</a>
                <a href="#" id="link-home" class="nav-link nav-active text-[13px] font-bold text-slate-600 hover:text-slate-900 transition-colors uppercase tracking-wider" onclick="showPage('home')">Objectifs</a>
                <a href="#" id="link-simulation" class="nav-link text-[13px] font-bold text-slate-600 hover:text-slate-900 transition-colors uppercase tracking-wider">Simulation</a>
                <a href="#" class="bg-slate-900 text-white px-8 py-3.5 rounded-full text-[11px] font-bold uppercase tracking-[0.15em] hover:bg-blue-700 transition-all shadow-lg hover:shadow-blue-200 hover:-translate-y-0.5">
                    Consultation
                </a>
            </div>

            <button id="menu-toggle" class="md:hidden p-2 text-slate-900 z-[110]" aria-label="Menu">
                <i data-lucide="menu" class="w-8 h-8"></i>
            </button>
        </div>
    </nav>

    <!-- Menu Mobile Content -->
    <div id="mobile-menu">
        <div class="flex flex-col space-y-10 text-center">
            <a href="#" onclick="toggleMenu();" class="text-4xl font-extrabold text-slate-900 hover:text-blue-700">Qui suis-je ?</a>
            <a href="#" onclick="toggleMenu(); showPage('home');" class="text-4xl font-extrabold text-slate-900 hover:text-blue-700">Audit Budget</a>
            <a href="#" onclick="toggleMenu();" class="text-4xl font-extrabold text-slate-900 hover:text-blue-700">Stratégie</a>
            <a href="#" onclick="toggleMenu();" class="text-4xl font-extrabold text-blue-700 underline underline-offset-8">Me contacter</a>
        </div>
    </div>

    <!-- PAGE ACCUEIL -->
    <main id="home-page" class="pt-40 pb-20 max-w-6xl mx-auto px-6">
        <header class="text-center mb-16">
            <h1 class="text-4xl md:text-5xl font-extrabold mb-6 gradient-text">Quel est votre projet de vie ?</h1>
            <p class="text-slate-500 text-lg max-w-2xl mx-auto leading-relaxed">
                Identifiez votre priorité actuelle pour recevoir un accompagnement personnalisé et des solutions concrètes.
            </p>
        </header>

        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            <!-- Cards -->
            <div onclick="showPage('immobilier')" class="glass-card p-8 cursor-pointer group hover-lift">
                <div class="w-14 h-14 bg-blue-100 text-blue-600 rounded-2xl flex items-center justify-center mb-6 group-hover:bg-blue-600 group-hover:text-white transition-colors">
                    <i class="fas fa-home text-2xl"></i>
                </div>
                <h3 class="text-xl font-bold mb-3">Achat Immobilier</h3>
                <p class="text-slate-500 text-sm mb-6 leading-relaxed">Préparez votre dossier d'acquisition ou d'investissement locatif.</p>
                <span class="text-blue-600 text-sm font-bold flex items-center">Lancer l'analyse <i class="fas fa-arrow-right ml-2 group-hover:translate-x-1 transition-transform"></i></span>
            </div>

            <div onclick="showPage('retraite')" class="glass-card p-8 cursor-pointer group hover-lift">
                <div class="w-14 h-14 bg-emerald-100 text-emerald-600 rounded-2xl flex items-center justify-center mb-6 group-hover:bg-emerald-600 group-hover:text-white transition-colors">
                    <i class="fas fa-umbrella-beach text-2xl"></i>
                </div>
                <h3 class="text-xl font-bold mb-3">Préparer ma Retraite</h3>
                <p class="text-slate-500 text-sm mb-6 leading-relaxed">Anticipez la baisse de revenus et optimisez votre future pension.</p>
                <span class="text-emerald-600 text-sm font-bold flex items-center">Simuler ma retraite <i class="fas fa-arrow-right ml-2 group-hover:translate-x-1 transition-transform"></i></span>
            </div>

            <div onclick="showPage('epargne')" class="glass-card p-8 cursor-pointer group hover-lift">
                <div class="w-14 h-14 bg-amber-100 text-amber-600 rounded-2xl flex items-center justify-center mb-6 group-hover:bg-amber-600 group-hover:text-white transition-colors">
                    <i class="fas fa-piggy-bank text-2xl"></i>
                </div>
                <h3 class="text-xl font-bold mb-3">Épargne de Précaution</h3>
                <p class="text-slate-500 text-sm mb-6 leading-relaxed">Constituez un matelas de sécurité disponible en cas d'imprévu.</p>
                <span class="text-amber-600 text-sm font-bold flex items-center">Calculer mon besoin <i class="fas fa-arrow-right ml-2 group-hover:translate-x-1 transition-transform"></i></span>
            </div>

            <div onclick="showPage('etudes')" class="glass-card p-8 cursor-pointer group hover-lift">
                <div class="w-14 h-14 bg-purple-100 text-purple-600 rounded-2xl flex items-center justify-center mb-6 group-hover:bg-purple-600 group-hover:text-white transition-colors">
                    <i class="fas fa-graduation-cap text-2xl"></i>
                </div>
                <h3 class="text-xl font-bold mb-3">Études des Enfants</h3>
                <p class="text-slate-500 text-sm mb-6 leading-relaxed">Prévoyez le financement du parcours scolaire et universitaire.</p>
                <span class="text-purple-600 text-sm font-bold flex items-center">Planifier l'avenir <i class="fas fa-arrow-right ml-2 group-hover:translate-x-1 transition-transform"></i></span>
            </div>

            <div onclick="showPage('transmission')" class="glass-card p-8 cursor-pointer group hover-lift">
                <div class="w-14 h-14 bg-rose-100 text-rose-600 rounded-2xl flex items-center justify-center mb-6 group-hover:bg-rose-600 group-hover:text-white transition-colors">
                    <i class="fas fa-hand-holding-heart text-2xl"></i>
                </div>
                <h3 class="text-xl font-bold mb-3">Transmission</h3>
                <p class="text-slate-500 text-sm mb-6 leading-relaxed">Réduisez la fiscalité successorale et protégez vos proches.</p>
                <span class="text-rose-600 text-sm font-bold flex items-center">Optimiser le transfert <i class="fas fa-arrow-right ml-2 group-hover:translate-x-1 transition-transform"></i></span>
            </div>

            <div onclick="showPage('croissance')" class="glass-card p-8 cursor-pointer group hover-lift">
                <div class="w-14 h-14 bg-indigo-100 text-indigo-600 rounded-2xl flex items-center justify-center mb-6 group-hover:bg-indigo-600 group-hover:text-white transition-colors">
                    <i class="fas fa-chart-pie text-2xl"></i>
                </div>
                <h3 class="text-xl font-bold mb-3">Fructifier un capital</h3>
                <p class="text-slate-500 text-sm mb-6 leading-relaxed">Améliorez le rendement de vos placements financiers.</p>
                <span class="text-indigo-600 text-sm font-bold flex items-center">Voir les opportunités <i class="fas fa-arrow-right ml-2 group-hover:translate-x-1 transition-transform"></i></span>
            </div>
        </div>
    </main>

    <!-- SECTION QUESTIONNAIRE DYNAMIQUE -->
    <section id="detail-page" class="pt-40 pb-20 max-w-2xl mx-auto px-6 hidden-page">
        <button onclick="showPage('home')" class="mb-8 text-slate-400 hover:text-slate-900 transition-colors flex items-center font-bold text-sm uppercase tracking-wider">
            <i class="fas fa-chevron-left mr-2"></i> Retour aux projets
        </button>

        <div class="bg-white rounded-[2rem] shadow-2xl overflow-hidden border border-slate-100">
            <div class="h-1.5 bg-slate-100 w-full">
                <div id="progress" class="h-full bg-blue-600 progress-bar" style="width: 0%"></div>
            </div>

            <div class="p-8 md:p-12">
                <div id="detail-header" class="mb-10 flex items-center space-x-5">
                    <div id="detail-icon" class="w-14 h-14 rounded-2xl flex items-center justify-center"></div>
                    <div>
                        <p class="text-[10px] font-bold text-slate-400 uppercase tracking-[0.2em] mb-1">Votre projet</p>
                        <h2 id="detail-title" class="text-2xl font-extrabold text-slate-900">Objectif</h2>
                    </div>
                </div>

                <form id="quiz-form" onsubmit="return false;">
                    <div id="quiz-content">
                        <!-- Questions injectées par JS -->
                    </div>

                    <!-- ÉTAPE COORDONNÉES -->
                    <div id="contact-step" class="step-container">
                        <h3 class="text-xl font-bold mb-2 text-slate-900">Dernière étape</h3>
                        <p class="text-slate-500 mb-8 text-sm">Complétez vos coordonnées pour recevoir votre analyse gratuite.</p>
                        <div class="space-y-5">
                            <input type="text" id="user_name" class="w-full p-4 bg-slate-50 rounded-2xl border-2 border-transparent focus:border-blue-500 outline-none transition-all font-medium" placeholder="Nom complet">
                            <input type="email" id="user_email" class="w-full p-4 bg-slate-50 rounded-2xl border-2 border-transparent focus:border-blue-500 outline-none transition-all font-medium" placeholder="Email">
                            <input type="tel" id="user_phone" class="w-full p-4 bg-slate-50 rounded-2xl border-2 border-transparent focus:border-blue-500 outline-none transition-all font-medium" placeholder="Téléphone">
                        </div>
                    </div>

                    <!-- ÉTAPE FINALE -->
                    <div id="final-step" class="step-container text-center py-10">
                        <div class="w-20 h-20 bg-green-100 text-green-600 rounded-full flex items-center justify-center mx-auto mb-6">
                            <i class="fas fa-check text-3xl"></i>
                        </div>
                        <h3 class="text-3xl font-extrabold mb-4 text-slate-900">Demande envoyée !</h3>
                        <p class="text-slate-500 mb-8">Nous reviendrons vers vous sous 24h pour discuter de votre projet.</p>
                        <button type="button" onclick="showPage('home')" class="bg-slate-900 text-white px-10 py-4 rounded-full font-bold">
                            Revenir à l'accueil
                        </button>
                    </div>

                    <p id="error-msg" class="text-red-500 text-sm font-bold mt-6 hidden">Veuillez remplir les informations avant de continuer.</p>

                    <div id="quiz-controls" class="mt-12 pt-8 border-t border-slate-100 flex justify-between items-center">
                        <button type="button" id="prev-btn" onclick="prevStep()" class="text-slate-400 font-bold uppercase text-xs tracking-widest">Précédent</button>
                        <button type="button" id="next-btn" onclick="nextStep()" class="bg-blue-600 text-white px-8 py-4 rounded-2xl font-bold shadow-lg shadow-blue-100 hover:bg-blue-700 transition-all">Continuer</button>
                    </div>
                </form>
            </div>
        </div>
    </section>

    <footer class="bg-slate-50 py-12 text-center text-[10px] font-bold text-slate-400 tracking-[0.2em] border-t border-slate-100 mt-20">
        <div class="max-w-3xl mx-auto opacity-70 leading-loose uppercase px-6">
            ACD GESTION & CONSEIL N'EXERCE PAS L'ACTIVITÉ DE CONSEILLER EN INVESTISSEMENTS FINANCIERS (CIF) RÉGLEMENTÉE. LES ANALYSES SONT FOURNIES À TITRE PÉDAGOGIQUE.
        </div>
    </footer>

    <script>
        lucide.createIcons();

        // --- NAVIGATION LOGIC ---
        window.addEventListener('scroll', () => {
            const nav = document.getElementById('navbar');
            if(window.scrollY > 40) {
                nav.classList.add('bg-white/80', 'backdrop-blur-xl', 'py-4', 'shadow-sm', 'border-b', 'border-slate-100');
                nav.classList.remove('py-6');
            } else {
                nav.classList.remove('bg-white/80', 'backdrop-blur-xl', 'py-4', 'shadow-sm', 'border-b', 'border-slate-100');
                nav.classList.add('py-6');
            }
        });

        const menuBtn = document.getElementById('menu-toggle');
        const mobileMenu = document.getElementById('mobile-menu');
        let isMenuOpen = false;

        function toggleMenu() {
            isMenuOpen = !isMenuOpen;
            mobileMenu.classList.toggle('active');
            menuBtn.innerHTML = isMenuOpen 
                ? `<i data-lucide="x" class="w-8 h-8"></i>` 
                : `<i data-lucide="menu" class="w-8 h-8"></i>`;
            lucide.createIcons();
            document.body.style.overflow = isMenuOpen ? 'hidden' : '';
        }

        menuBtn.addEventListener('click', toggleMenu);

        // --- QUIZ DATA ---
        const projectsData = {
            immobilier: {
                title: "Achat Immobilier",
                icon: "fa-home", color: "bg-blue-100 text-blue-600",
                questions: [
                    { q: "Quel est l'usage du bien ?", options: ["Résidence Principale", "Investissement Locatif Pinel", "LMNP (Meublé)", "Locatif Classique"] },
                    { q: "Avez-vous déjà trouvé le bien ?", options: ["Oui, j'ai signé un compromis", "Oui, je suis en négociation", "Non, je prospecte encore"] },
                    { q: "Quel est votre budget global ?", type: "number", placeholder: "ex: 350000", suffix: "€" },
                    { q: "Montant de vos revenus annuels nets ?", type: "number", placeholder: "ex: 45000", suffix: "€ / an" },
                    { q: "Situation professionnelle ?", options: ["CDI (période d'essai validée)", "CDD / Indépendant", "Fonctionnaire", "Retraité"] }
                ]
            },
            retraite: {
                title: "Préparer ma Retraite",
                icon: "fa-umbrella-beach", color: "bg-emerald-100 text-emerald-600",
                questions: [
                    { q: "Quel est votre âge actuel ?", type: "number", placeholder: "ex: 42", suffix: "ans" },
                    { q: "Âge de départ souhaité ?", type: "number", placeholder: "ex: 64", suffix: "ans" },
                    { q: "Revenus annuels actuels ?", options: ["Moins de 30k€", "30k€ à 60k€", "60k€ à 100k€", "Plus de 100k€"] },
                    { q: "Objectif de rente mensuelle ?", type: "number", placeholder: "ex: 2000", suffix: "€ / mois" }
                ]
            },
            epargne: {
                title: "Épargne de Précaution",
                icon: "fa-piggy-bank", color: "bg-amber-100 text-amber-600",
                questions: [
                    { q: "Montant à sécuriser ?", options: ["1 à 3 mois de salaire", "3 à 6 mois de salaire", "Plus de 6 mois"] },
                    { q: "Capacité d'épargne mensuelle ?", type: "number", placeholder: "ex: 200", suffix: "€" },
                    { q: "Disponibilité souhaitée ?", options: ["Immédiate (Livrets)", "Semi-bloquée (Assurance-vie)", "Peu importe"] }
                ]
            },
            etudes: {
                title: "Études des Enfants",
                icon: "fa-graduation-cap", color: "bg-purple-100 text-purple-600",
                questions: [
                    { q: "Nombre d'enfants ?", type: "number", placeholder: "ex: 2", suffix: "enfant(s)" },
                    { q: "Horizon de temps ?", type: "number", placeholder: "ex: 8", suffix: "ans" },
                    { q: "Budget cible par enfant ?", type: "number", placeholder: "ex: 30000", suffix: "€" }
                ]
            },
            transmission: {
                title: "Transmission",
                icon: "fa-hand-holding-heart", color: "bg-rose-100 text-rose-600",
                questions: [
                    { q: "Patrimoine actuel estimé ?", options: ["Moins de 200k€", "200k€ à 500k€", "500k€ à 1M€", "Plus de 1M€"] },
                    { q: "Assurance-vie déjà ouverte ?", options: ["Oui, de plus de 8 ans", "Oui, de moins de 8 ans", "Non"] },
                    { q: "Priorité ?", options: ["Protéger le conjoint", "Optimiser pour les enfants", "Réduire les taxes"] }
                ]
            },
            croissance: {
                title: "Fructifier un capital",
                icon: "fa-chart-pie", color: "bg-indigo-100 text-indigo-600",
                questions: [
                    { q: "Montant à investir ?", type: "number", placeholder: "ex: 50000", suffix: "€" },
                    { q: "Niveau de risque ?", options: ["Prudent", "Équilibré", "Dynamique"] },
                    { q: "Durée de placement ?", options: ["2-5 ans", "5-10 ans", "Plus de 10 ans"] }
                ]
            }
        };

        let currentStep = 0;
        let currentQuestions = [];

        function showPage(pageId) {
            const home = document.getElementById('home-page');
            const detail = document.getElementById('detail-page');
            
            // Highlight Logic
            const links = document.querySelectorAll('.nav-link');
            links.forEach(l => l.classList.remove('nav-active'));

            if (pageId === 'home') {
                detail.classList.add('hidden-page');
                home.classList.remove('hidden-page');
                document.getElementById('link-home').classList.add('nav-active');
            } else {
                const data = projectsData[pageId];
                currentQuestions = data.questions;
                currentStep = 0;
                
                document.getElementById('quiz-form').reset();
                document.getElementById('detail-title').innerText = data.title;
                const iconDiv = document.getElementById('detail-icon');
                iconDiv.className = `w-14 h-14 rounded-2xl flex items-center justify-center ${data.color}`;
                iconDiv.innerHTML = `<i class="fas ${data.icon} text-2xl"></i>`;

                renderQuestions();
                home.classList.add('hidden-page');
                detail.classList.remove('hidden-page');
                updateStepVisibility();
                
                // On considère que le questionnaire fait partie de la section "Simulation" ou "Objectifs"
                document.getElementById('link-simulation').classList.add('nav-active');
            }
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function renderQuestions() {
            const container = document.getElementById('quiz-content');
            container.innerHTML = '';
            currentQuestions.forEach((q, index) => {
                const stepDiv = document.createElement('div');
                stepDiv.id = `step-${index}`;
                stepDiv.className = 'step-container';
                
                let inputHtml = '';
                if (q.options) {
                    inputHtml = `<div class="grid grid-cols-1 gap-4">
                        ${q.options.map((opt, i) => `
                            <label class="group block">
                                <input type="radio" name="q_${index}" value="${opt}" class="hidden peer">
                                <div class="p-5 border-2 border-slate-100 rounded-2xl peer-checked:border-blue-500 peer-checked:bg-blue-50 hover:bg-slate-50 transition-all flex items-center cursor-pointer">
                                    <div class="w-5 h-5 rounded-full border-2 border-slate-200 mr-4 flex items-center justify-center peer-checked:border-blue-500">
                                        <div class="w-2.5 h-2.5 bg-blue-500 rounded-full opacity-0 peer-checked:opacity-100"></div>
                                    </div>
                                    <span class="font-bold text-slate-700">${opt}</span>
                                </div>
                            </label>
                        `).join('')}
                    </div>`;
                } else {
                    inputHtml = `<div class="relative group">
                        <input type="${q.type}" id="input_${index}" placeholder="${q.placeholder}" class="w-full p-6 bg-slate-50 rounded-2xl border-2 border-transparent focus:border-blue-500 focus:bg-white outline-none text-2xl font-extrabold transition-all">
                        <span class="absolute right-6 top-1/2 -translate-y-1/2 text-xl font-bold text-slate-300">${q.suffix}</span>
                    </div>`;
                }

                stepDiv.innerHTML = `<h3 class="text-2xl font-extrabold text-slate-900 mb-8">${q.q}</h3>${inputHtml}`;
                container.appendChild(stepDiv);
            });
        }

        function nextStep() {
            if (!validate()) return;
            
            if (currentStep <= currentQuestions.length) {
                currentStep++;
                updateStepVisibility();
            }
        }

        function prevStep() {
            if (currentStep > 0) {
                currentStep--;
                updateStepVisibility();
            }
        }

        function validate() {
            const error = document.getElementById('error-msg');
            error.classList.add('hidden');

            // Validation des questions
            if (currentStep < currentQuestions.length) {
                const q = currentQuestions[currentStep];
                if (q.options) {
                    if (!document.querySelector(`input[name="q_${currentStep}"]:checked`)) { 
                        error.innerText = "Veuillez sélectionner une option.";
                        error.classList.remove('hidden'); 
                        return false; 
                    }
                } else {
                    if (!document.getElementById(`input_${currentStep}`).value) { 
                        error.innerText = "Veuillez remplir le champ.";
                        error.classList.remove('hidden'); 
                        return false; 
                    }
                }
            } 
            // Validation du formulaire de contact
            else if (currentStep === currentQuestions.length) {
                const name = document.getElementById('user_name').value;
                const email = document.getElementById('user_email').value;
                const phone = document.getElementById('user_phone').value;
                if (!name || !email || !phone) {
                    error.innerText = "Veuillez remplir tous vos champs de contact.";
                    error.classList.remove('hidden');
                    return false;
                }
            }
            return true;
        }

        function updateStepVisibility() {
            // Cacher toutes les étapes
            document.querySelectorAll('.step-container').forEach(s => s.classList.remove('active'));
            
            const totalSteps = currentQuestions.length + 1;
            document.getElementById('progress').style.width = `${(currentStep / totalSteps) * 100}%`;

            if (currentStep < currentQuestions.length) {
                document.getElementById(`step-${currentStep}`).classList.add('active');
                document.getElementById('quiz-controls').classList.remove('hidden');
                document.getElementById('prev-btn').style.visibility = currentStep === 0 ? 'hidden' : 'visible';
                document.getElementById('next-btn').innerText = 'Continuer';
            } else if (currentStep === currentQuestions.length) {
                document.getElementById('contact-step').classList.add('active');
                document.getElementById('quiz-controls').classList.remove('hidden');
                document.getElementById('next-btn').innerText = 'Envoyer ma demande';
            } else {
                document.getElementById('final-step').classList.add('active');
                document.getElementById('quiz-controls').classList.add('hidden');
                document.getElementById('progress').style.width = '100%';
            }
        }
    </script>
</body>
</html>
